<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Data guide - OceanGraph App Guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OceanGraph App Guide</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="data-guide"><a class="header" href="#data-guide">Data guide</a></h1>
<h1 id="data-source"><a class="header" href="#data-source">Data source</a></h1>
<p>These data were collected and made freely available by the International Argo Program and the national programs that contribute to it (<a href="http://www.argo.ucsd.edu">http://www.argo.ucsd.edu</a>, <a href="http://argo.jcommops.org">http://argo.jcommops.org</a>).
The Argo Program is part of the Global Ocean Observing System.</p>
<p>DOI: Argo (2000). Argo float data and metadata from Global Data Assembly Centre (Argo GDAC). SEANOE. <a href="http://doi.org/10.17882/42182">http://doi.org/10.17882/42182</a></p>
<h1 id="data-filtering-policy"><a class="header" href="#data-filtering-policy">Data filtering policy</a></h1>
<p>In OceanGraph, only carefully selected Argo float profiles are used according to the following conditions:</p>
<h2 id="1-selection-of-profiles"><a class="header" href="#1-selection-of-profiles">1. Selection of profiles</a></h2>
<ul>
<li>Only real-time (<code>R</code>, <code>BR</code>) and delayed-mode (<code>D</code>, <code>BD</code>) profiles are used.</li>
<li>If both real-time and delayed-mode profiles exist for the same cycle, the delayed-mode profile (D or BD) is preferred.</li>
<li>Drift profiles (those with a <code>D</code> at the end of <code>CYCLE_NUMBER</code>) are excluded.</li>
</ul>
<h2 id="2-required-variables"><a class="header" href="#2-required-variables">2. Required variables</a></h2>
<p>Only profiles that include all of the following variables are used:</p>
<ul>
<li><code>PLATFORM_NUMBER</code></li>
<li><code>CYCLE_NUMBER</code></li>
<li><code>JULD</code></li>
<li><code>JULD_QC</code></li>
<li><code>LATITUDE</code></li>
<li><code>LONGITUDE</code></li>
<li><code>PRES_ADJUSTED</code></li>
<li><code>PRES_ADJUSTED_QC</code></li>
<li><code>TEMP_ADJUSTED</code></li>
<li><code>TEMP_ADJUSTED_QC</code></li>
<li><code>PSAL_ADJUSTED</code></li>
<li><code>PSAL_ADJUSTED_QC</code></li>
</ul>
<h2 id="3-date-and-position-quality-control"><a class="header" href="#3-date-and-position-quality-control">3. Date and position quality control</a></h2>
<ul>
<li>
<p>Only profiles with <code>JULD_QC</code> values of 1 or 2 are used.</p>
</li>
<li>
<p>Only profiles with <code>POSITION_QC</code> values of 1 or 2 are used.</p>
</li>
<li>
<p>Even if a profile passes the <code>POSITION_QC</code> check, some data may still be unreliable. For example, as shown in the red circle below, caution is advised when interpreting such data.</p>
<p><img src="../../imgs/position_qc.png" alt="Position QC Check" /></p>
</li>
</ul>
<p><strong>Note:</strong> In some NetCDF files, multiple profiles can be present in a single file. In such cases, only the first profile (i.e., index 0) is used for further analysis, as illustrated in the example below:</p>
<pre><code class="language-python"># NetCDF file:
D5906026_128.nc

# JULD_QC:
[b'1' b'1']

# POSITION_QC:
[b'1' b'1']

# TEMP_QC:
[[b'1' b'1' b'1' ... b'1' b'1' b'1']
 [b'1' b'1' b'1' ... nan nan nan]]

# TEMP:
[[7.743  7.745  7.745  ... 2.0353 1.9964 1.9618]
 [7.7466 7.7459 7.7462 ...    nan    nan    nan]]
</code></pre>
<h2 id="4-depth-range-restriction"><a class="header" href="#4-depth-range-restriction">4. Depth range restriction</a></h2>
<p>Only data from depths shallower than <strong>2000 dbar</strong> are retained. Additionally, layers with negative pressure values are removed along with their corresponding data (temperature, salinity, dissolved oxygen, etc.).</p>
<h2 id="5-profile-quality-filtering"><a class="header" href="#5-profile-quality-filtering">5. Profile quality filtering</a></h2>
<p>Only profiles where at least <strong>80%</strong> of <code>PRES_ADJUSTED_QC</code>, <code>TEMP_ADJUSTED_QC</code>, and <code>PSAL_ADJUSTED_QC</code> flags are either 1 or 2 are kept.</p>
<h2 id="6-layer-by-layer-filtering"><a class="header" href="#6-layer-by-layer-filtering">6. Layer-by-Layer filtering</a></h2>
<ul>
<li>Only layers where the QC flags for pressure, temperature, and salinity are all 1 or 2 are kept.</li>
<li>For dissolved oxygen (<code>DOXY_ADJUSTED</code>):
<ul>
<li>Data are kept if the corresponding pressure, temperature, and salinity flags are all 1 or 2.</li>
<li>The QC flag of DOXY itself is not used for filtering. This is because oxygen sensor quality can vary significantly, and applying its QC flag strictly may severely limit the available data.</li>
<li>Users should carefully interpret dissolved oxygen data due to potential sensor uncertainties.</li>
</ul>
</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>pres_qc</th><th>temp_qc</th><th>psal_qc</th><th>doxy_qc</th><th>Judgment</th></tr></thead><tbody>
<tr><td>1 or 2</td><td>1 or 2</td><td>1 or 2</td><td>1 or 2</td><td>PASS</td></tr>
<tr><td>0</td><td>1 or 2</td><td>1 or 2</td><td>1 or 2</td><td>FAIL</td></tr>
<tr><td>1 or 2</td><td>0</td><td>1 or 2</td><td>1 or 2</td><td>FAIL</td></tr>
<tr><td>1 or 2</td><td>1 or 2</td><td>0</td><td>1 or 2</td><td>FAIL</td></tr>
<tr><td>1 or 2</td><td>1 or 2</td><td>1 or 2</td><td>0 (*)</td><td><strong>PASS</strong></td></tr>
</tbody></table>
</div>
<p><strong>(*) DOXY quality flag is not used in filtering.</strong></p>
<h2 id="7-nan-value-detection"><a class="header" href="#7-nan-value-detection">7. NaN value detection</a></h2>
<p>After the layer-by-layer filtering, the system checks for any remaining NaN (Not a Number) values in the core variables:</p>
<ul>
<li>Pressure (<code>PRES_ADJUSTED</code>)</li>
<li>Temperature (<code>TEMP_ADJUSTED</code>)</li>
<li>Salinity (<code>PSAL_ADJUSTED</code>)</li>
</ul>
<p>If any NaN values are detected in these critical variables, the entire profile is rejected and removed from the dataset. This ensures data integrity and prevents computational errors in downstream analysis.</p>
<h2 id="8-interpolation-of-missing-values-for-dissolved-oxygen"><a class="header" href="#8-interpolation-of-missing-values-for-dissolved-oxygen">8. Interpolation of missing values for dissolved oxygen</a></h2>
<p>For dissolved oxygen concentrations, which often contain missing (<code>NaN</code>) values, the following interpolation procedure is applied:</p>
<ol>
<li>Linear interpolation is used for internal (non-endpoint) missing values.</li>
<li>Remaining missing values at the beginning or end of the profile are filled using backward-fill and forward-fill, respectively.</li>
</ol>
<h2 id="9-duplicate-pressure-value-removal"><a class="header" href="#9-duplicate-pressure-value-removal">9. Duplicate pressure value removal</a></h2>
<p>To ensure data integrity and maintain strictly increasing pressure sequences, duplicate pressure values are removed using a deterministic sorting approach:</p>
<ol>
<li><strong>Pressure grouping</strong>: Data points are grouped by rounded pressure values (to 0.01 dbar precision).</li>
<li><strong>Deterministic selection</strong>: When multiple data points exist at the same pressure level, they are sorted by:
<ul>
<li>Original pressure value</li>
<li>Temperature value</li>
<li>Salinity value</li>
</ul>
</li>
<li><strong>First entry retention</strong>: The first entry from the sorted group is kept, while duplicates are discarded.</li>
</ol>
<p>This process ensures that each profile has a unique, monotonically increasing pressure sequence, which is essential for accurate oceanographic analysis and prevents computational issues in downstream processing.</p>
<h2 id="10-pressure-gap-filtering"><a class="header" href="#10-pressure-gap-filtering">10. Pressure gap filtering</a></h2>
<p>Profiles with excessively large gaps in pressure measurements are rejected and removed from the dataset to ensure data continuity. The filtering uses depth-dependent gap thresholds that become more permissive with increasing depth:</p>
<ul>
<li><strong>0-100 dbar</strong>: Maximum gap of 33.33 dbar</li>
<li><strong>100-200 dbar</strong>: Maximum gap of 66.67 dbar</li>
<li><strong>200-300 dbar</strong>: Maximum gap of 100 dbar</li>
<li><strong>300-1000 dbar</strong>: Maximum gap increases proportionally (depth/3)</li>
<li><strong>&gt;1000 dbar</strong>: Maximum gap of 500 dbar</li>
</ul>
<p>This ensures that profiles maintain adequate vertical resolution throughout the water column, with stricter requirements in shallower waters where oceanographic gradients are typically steeper.</p>
<h2 id="11-oceanographic-parameter-conversion"><a class="header" href="#11-oceanographic-parameter-conversion">11. Oceanographic parameter conversion</a></h2>
<p>To ensure consistency with oceanographic standards, the following parameter conversions are applied:</p>
<ol>
<li><strong>Temperature to potential temperature (θ)</strong>: In-situ temperature is converted to potential temperature using the TEOS-10 Gibbs Seawater (GSW) oceanographic toolbox.</li>
<li><strong>Practical salinity to absolute salinity (SA)</strong>: Practical salinity is converted to absolute salinity using the GSW toolbox, taking into account the geographic location (latitude/longitude) and pressure.</li>
</ol>
<p>These conversions provide more accurate representations of water mass properties by removing the effects of pressure and enabling precise oceanographic calculations. Profiles that encounter computational errors during these conversions are rejected to maintain data quality.</p>
<h2 id="12-decimal-precision"><a class="header" href="#12-decimal-precision">12. Decimal precision</a></h2>
<p>To reduce data size, the values are rounded to the nearest values shown below:</p>
<div class="table-wrapper"><table><thead><tr><th>Variable</th><th>Precision</th></tr></thead><tbody>
<tr><td>Pressure</td><td>0.01</td></tr>
<tr><td>Temperature</td><td>0.001</td></tr>
<tr><td>Salinity</td><td>0.001</td></tr>
<tr><td>Dissolved oxygen concentration</td><td>0.001</td></tr>
</tbody></table>
</div>
<h1 id="limitations"><a class="header" href="#limitations">Limitations</a></h1>
<h2 id="missing-values-in-vertical-section-charts"><a class="header" href="#missing-values-in-vertical-section-charts">Missing Values in Vertical Section Charts</a></h2>
<ol>
<li>
<p>Masked Areas Without Original Data</p>
<p>When generating time-series vertical section charts of Argo float data, interpolation (e.g., using scipy.interpolate.griddata) is used to transform irregularly spaced profile data into a regular grid. Some areas may remain unfilled where original profile data are missing. To address this, we apply a mask after gridding to exclude regions without valid observations, setting those values to NaN.</p>
<p>In the example image below, these masked areas appear as uncolored gaps in the vertical section.</p>
</li>
<li>
<p>Sparse Data Due to Quality Control</p>
<p>After applying quality control, some profiles may be excluded, resulting in a sparser time series. Even if valid profiles are present at certain time steps, the interpolation process may not be able to generate a continuous vertical section. This leads to sections where observation points exist (trajectory figure) but the interpolated chart shows gray or missing areas (vertical section figure), indicating insufficient data density for interpolation.</p>
<p>This can be seen in the same image where gray regions appear in the section chart, even though observation points are visible in the trajectory chart above.</p>
</li>
</ol>
<p><img src="../../imgs/section_missing_values.png" alt="Missing section example" /></p>
<p>Please keep this in mind when interpreting the charts.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../app_guide/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../app_guide/data_guide/data_source.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../app_guide/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../app_guide/data_guide/data_source.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../mermaid.min.js"></script>
        <script src="../../mermaid-init.js"></script>



    </div>
    </body>
</html>
